---
layout: post
title: C语言总结
excerpt: "pwn中使用的C语言总结"
categories: [知识总结]
comments: true
---

## Write和Read

**STDIN_FILENO：接收键盘的输入**

**STDOUT_FILENO：向屏幕输出**

接收用户在屏幕上输入的数据，并在屏幕上输出（要求使用read和wirte实现），用户输入quit就退出程序。

```
graph LR
键盘-->|输入|程序
程序-->|输出|屏幕
```

代码
```c
#include <stdio.h>
#include <string.h>
#include <unistd.h>

int main(int argc, char *args[]) {
    char buf_read[1024];
    char buf_write[1024];

    while (1) {
        memset(buf_read, 0, sizeof(buf_read));// 将buf_read全部设为0
        memset(buf_write, 0, sizeof(buf_write));

        char input_message[100] = "input some words : ";
        write(STDOUT_FILENO, input_message, sizeof(input_message));
        read(STDIN_FILENO, buf_read, sizeof(buf_read));// 读取用户的键盘输入信息
        if (strncmp(buf_read, "quit", 4) == 0) {
            break;
        }
        strcpy(buf_write, buf_read);
        char output_message[100] = "output some words : ";
        write(STDOUT_FILENO, output_message, sizeof(output_message));
        write(STDOUT_FILENO, buf_write, strlen(buf_write));// 将信息显示在屏幕上
    }
    return 0;
}
```
编译
```
gcc main.c -o main
```

最后的结果
```
./main 
input some words : 123
output some words : 123
input some words : 123
output some words : 123
input some words : 434
output some words : 434
input some words : 33434
output some words : 33434
```

## atoi
将字符串转换为数字类型
```c
#include <stdlib.h>
#include <stdio.h>

int main(void)
{
    int n;
    char *str = "12345.67";
    n = atoi(str);
    printf("n=%d\n",n);//%d要求输入的数字类型
    return 0;
}
```